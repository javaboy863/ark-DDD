### 背景
&emsp;&emsp;
本篇主要讲下我对DDD的看法，以及我是怎么应用DDD到我们的项目中的。

### DDD的能力
&emsp;&emsp;
在我看来DDD主要提供如下能力：
- 战略设计        
    - 界限上下文
    - 域：子域/核心域/通用域
    - 统一语言
    - 建模：领域建模/事件风暴
- 战术设计        
    - CQRS
    - 实体/值对象
    - 聚合/聚合根
    - 领域事件
    - 上下文映射/防腐层
    - 工厂

### DDD开发流程
&emsp;&emsp;
我们在使用DDD进行开发的流程如下：

1、梳理业务：梳理业务流程，挖掘领域概念，形成统一语言。

2、战略设计：划分领域边界，建立限界上下文。

3、战术设计：寻找实体，建立关系，形成领域模型。

4、API设计：根据用户故事，输出服务功能API。

5、根据API功能要求，在App层编写业务过程代码。

6、以领域模型为基础，优化过程代码，沉淀领域能力和领域知识，让业务语义更明晰。

7、技术细节：完善技术细节代码，比如API的暴露方式（RPC 或者 Restful），数据的存储方式（关系数据库 或者 NoSQL），ORM框架的选用（MyBatis 或者 JPA)等。

### 把DDD应用到项目中
&emsp;&emsp;
我的做法是这样的：采用分层框架+CQRS+DDD+逐步下沉业务逻辑的方式进行开发。

- 在战略设计部分：战略设计需要主R懂一些DDD，再加上我提供的架构设计文档模板，即可完成。

- 在战术实施部分：战术部分我已经框架化，只要接入分层框架，按照框架约定的方式去写，写出来的代码即是符合DDD的。具体见下面链接：

[分层框架 1.0](https://github.com/javaboy863/ark-layer-framework)

[分层框架 2.0](https://github.com/javaboy863/ark-sample-clean-code)

### DDD的价值
&emsp;&emsp;
有些同学为了赶潮流，或为了学新技术，强行在项目中应用DDD，造成的结果是，是为了使用DDD而使用DDD。

&emsp;&emsp;
而在我看来，要使用DDD到项目前，先弄明白DDD能给你带来什么。在我使用DDD后，感受到DDD带来的收益如下：

- 1、DDD是复杂性治理的重要手段
  - 降低复杂性等于提效降本，快速响应业务变化
  - 领域建模
  - 面向对象
  - 领域模型与数据模型分离，领域内高内聚低耦合 ，业务复杂度与技术复杂度分离，保持结构清晰，以应对不可预测性挑战。
  - 业务技术解耦，DDD 的核心思想就是要避免业务逻辑的复杂度与技术实现的复杂度混淆在一起
  - 划分领域，边界清晰
- 2、真正做到业务沉淀
  - DDD尤其善于处理于领域相关的高复杂度业务的产品研发，通过它可以为你的产品建立一个核心而稳定的领域模型，有利于知识的传递和继承。
  - 高端的职位，往往关注的是我们对业务的理解。解决了什么业务问题？DDD 锻炼我们的业务导向思维方式，当我们足够了解业务的时候，我们就是所在领域的专家。我们会发现业务上存在哪些问题，我们可以帮助业务做出改进，为业务赋能。当我们帮助业务解决了更多的问题，就能建立了更多的信任。信任，让我们可以有更多的话语权，可以更平等的沟通。当我们参与到业务里的时候，我们就不是工具人了，而是参与者，甚至是主导者。
  - 统一语言，降低沟通成本
  - 业务语义显性化
- 3、模型可扩展：很好地对业务需求进行了到领域服务的转化，同时是微服务及项目落地开发的纽带，领域模型是可扩展且易维护的，也提高了相应的可重用性和可测试性。
- 4、完整的设计方法论
  - DDD是一套完整且系统的设计方法，它能带给你从战略设计到战术设计的规范过程，让设计思路更清晰，过程更规范。
  - 除了DDD，目前没有其他的理论
- 5、个人成长
  - 写出漂亮的代码
- 6、降本提效
  - 新需求接入开发成本节约
  - 降低底层中间件开发成本
  - 降低项目熟悉成本
  - 单测开发成本指数级降低
- 7、中台落地：DDD有助于中台的落地
- 8、最后，避免为了DDD而照搬概念，弄的复杂务必，适得其反
  - 当你了解了一些DDD的概念，然后在代码中使用Aggregation Root，Bonded Context，Repository等等这些概念。更进一步，也会使用一定的分层策略。然而这种做法一般对复杂度的治理并没有多大作用。

### 最后说说为什么要领域建模
&emsp;&emsp;
领域建模即是面向对象，所以好处也是显而易见的：

    1、易维护
      采用面向对象思想设计的结构，可读性高，由于继承的存在，即使改变需求，那么维护也只是在局部模块，所以维护起来是非常方便和较低成本的。
    2、质量高
      在设计时，可重用现有的，在以前的项目的领域中已被测试过的类使系统满足业务需求并具有较高的质量。
    3、效率高
      在软件开发时，根据设计的需要对现实世界的事物进行抽象，产生类。使用这样的方法解决问题，接近于日常生活和自然的思考方式，势必提高软件开发的效率和质量。
    4、易扩展
      由于继承、封装、多态的特性，自然设计出高内聚、低耦合的系统结构，使得系统更灵活、更容易扩展，而且成本较低。"


